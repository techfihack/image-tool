<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Image Conversion Tool</title>

    <!-- jQuery from CDN -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!-- Bootstrap CSS from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/jpg" sizes="16x16" href="./image/cat.jpg">
    <link rel="stylesheet" href="./style/style.css">
    <style>
        /* Adjust column widths */
        #fileList th:nth-child(1), #fileList td:nth-child(1) { width: 20%; } /* Adjusted width for preview */
        #fileList th:nth-child(2), #fileList td:nth-child(2) { width: 30%; } /* Adjusted width for filename */
        #fileList th:nth-child(3), #fileList td:nth-child(3) { width: 25%; } /* Adjusted width for current width */
        #fileList th:nth-child(4), #fileList td:nth-child(4) { width: 25%; } /* Adjusted width for current height */
    </style>
</head>
<body>

<div class="my-container">

    <h3> Image Conversion </h3>

    <form id="imageForm" class="form-inline" action="/api/upload" method="post" enctype="multipart/form-data">

        <!-- Files -->
        <div class="row mb-3">
            <div class="col-md-12">
                <div class="form-group file-upload-wrapper">
                    <label for="files" class="form-label file-upload-button">
                        Choose Files (Maximum 50 files)
                    </label>
                    <input class="form-control file-upload-input" id="files" type="file" name="files" accept="image/*" multiple>
                </div>
            </div>
        </div>

        <!-- Format (moved below file selection) -->
        <div class="row mb-2">
            <div class="col-md-12">
                <div class="form-group">
                    <label class="form-label" for="imageFormats">Conversion Format : </label>
                    <select class="form-control" id="imageFormats"></select>
                </div>
            </div>
        </div>

        <!-- Apply To All and Strip Metadata checkboxes moved above the table -->
        <div class="row mb-2">
            <div class="col-md-12">
                <div class="form-group apply-to-all-container">
                    <input type="checkbox" id="applyToAll" name="applyToAll" class="apply-to-all-checkbox">
                    <label for="applyToAll" class="apply-to-all-label">Apply To All</label>
                    <input id="globalWidth" name="globalWidth" class="form-control" type="number" placeholder="Width (px)" style="display: inline-block; width: 120px; margin-left: 10px;">
                </div>
            </div>
        </div>

        <div class="row mb-2">
            <div class="col-md-12">
                <div class="form-group strip-metadata-container">
                    <input type="checkbox" id="stripMetadata" name="stripMetadata" class="strip-metadata-checkbox">
                    <label for="stripMetadata" class="strip-metadata-label">Strip Metadata</label>
                </div>
            </div>
        </div>

        <!-- Compress Ratio -->
        <div class="row mb-4"> <!-- Increased bottom margin for spacing -->
            <div class="col-md-12">
                <div class="form-group">
                    <label class="form-label label-compress-quality" for="compressQuality">Compress Ratio (%) : </label>
                    <span id="rangeValue">92%</span>
                    <input id="compressQuality" type="range" min="20" max="100" step="1" value="92">
                </div>
            </div>
        </div>

        <div class="row mb-4"> <!-- Increased top margin for spacing -->
            <table id="fileList" class="table table-bordered">
                <thead>
                    <tr>
                        <th>Preview</th>
                        <th>Filename</th>
                        <th>Current Width (px)</th>
                        <th>Current Height (px)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dynamically filled rows will go here -->
                </tbody>
            </table>
        </div>

        <div class="row mb-3">
            <div class="col-md-12">
                <div class="form-group text-center">
                    <button id="btn-convert-image" class="btn btn-primary submit-button" type="button" style="margin-top:10px">Convert</button>
                </div>
            </div>
        </div>

    </form>

    <div id="result" ></div>
    <div id="downloadDiv" ></div>
</div>
<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js"
        data-name="bmc-button"
        data-slug="dorashad0w"
        data-color="#5F7FFF"
        data-emoji="â˜•"
        data-font="Comic"
        data-text="Buy me a coffee meow ~"
        data-outline-color="#000000"
        data-font-color="#ffffff"
        data-coffee-color="#FFDD00" >
</script>
<script src="./js/script.js" ></script>
</body>

<footer style="background-color: #333; color: white; text-align: center; padding: 20px 0; position: relative; bottom: 0; width: 100%;">
    <div>
        <p>&copy; 2024 doramiao. All rights reserved.</p>
        <p>
            <a href="/about" style="color: white; margin: 0 10px;">About Us</a> |
            <a href="/privacy" style="color: white; margin: 0 10px;">Privacy Policy</a> |
            <a href="/terms" style="color: white; margin: 0 10px;">Terms of Use</a>
        </p>
        <p>Support us: <a href="https://www.buymeacoffee.com/dorashad0w" style="color: white;">Buy Me A Coffee</a></p>
    </div>
</footer>
</html>